<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>麻将记分器</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon" href="icon.png">

<style>
    body { font-family: Arial, sans-serif; padding: 10px; }
    h2 { margin-top: 0; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 6px; text-align: center; }
    input[type="number"] { width: 60px; font-size: 16px; }
    select { width: 90px; font-size: 16px; }
    button { font-size: 14px; padding: 4px 8px; margin: 4px 2px; }
    .summary { font-weight: bold; background: #f0f0f0; }
    .dealer { background: #fff4c2; font-weight: bold; }
    .current { background: #d0ebff !important; }
    .statline { font-size: 14px; color: #444; }
    .section-header {
        font-weight: bold;
        cursor: pointer;
        user-select: none;
        margin: 6px 0;
    }
    .section-header span.toggle {
        font-size: 12px;
        color: #666;
        margin-left: 4px;
    }
    .player-list {
        margin-bottom: 6px;
        padding-left: 4px;
    }
    .player-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 14px;
        margin: 2px 0;
    }
    .player-row span.name {
        flex: 1;
    }
    .player-row button {
        font-size: 12px;
        padding: 2px 6px;
    }
    .controls {
        margin-top: 10px;
    }
    @media (max-width: 768px) {
        table { font-size: 16px; }
        th, td { padding: 8px; }
        select, input { font-size: 18px; }
        button { font-size: 16px; }
        body { padding: 5px; }
    }
</style>
</head>

<body>

<h2>麻将 16 局 记分器</h2>

<!-- 玩家列表（可折叠，默认展开） -->
<div>
    <div id="playerListHeader" class="section-header">
        玩家列表 <span id="playerListToggle" class="toggle">▼</span>
    </div>
    <div id="playerListContainer" class="player-list">
        <div id="playerList"></div>
        <button id="addPlayerBtn">添加玩家</button>
    </div>
</div>

<!-- 座位选择 -->
<div style="margin-top:8px;">
    <strong>座位选择:</strong><br>
    东: <select id="seatE"></select>
    南: <select id="seatS"></select>
    西: <select id="seatW"></select>
    北: <select id="seatN"></select>
</div>

<!-- 记分表 -->
<div style="overflow-x:auto;">
<table id="scoreTable">
<thead>
<tr>
    <th>风圈</th>
    <th>番数</th>
    <th>胡</th>
    <th>放炮 / 自摸</th>
    <th id="colE">东<br><span id="statE" class="statline"></span></th>
    <th id="colS">南<br><span id="statS" class="statline"></span></th>
    <th id="colW">西<br><span id="statW" class="statline"></span></th>
    <th id="colN">北<br><span id="statN" class="statline"></span></th>
</tr>
</thead>

<tbody id="rounds"></tbody>

<tfoot>
<tr class="summary">
    <td colspan="4">总分</td>
    <td id="sumE">0</td>
    <td id="sumS">0</td>
    <td id="sumW">0</td>
    <td id="sumN">0</td>
</tr>
</tfoot>
</table>
</div>

<!-- 控制按钮 -->
<div class="controls">
    <button id="resetGameBtn">重置本局</button>
    <button id="resetAllBtn">全部重置</button>
</div>

<!-- 历史记录（可折叠，默认收起） -->
<div style="margin-top:20px;">
    <div id="historyHeader" class="section-header">
        历史记录 <span id="historyToggle" class="toggle">▲</span>
    </div>
    <div id="historyContainer" style="display:none; padding-left:4px;">
        <div id="historyList"></div>
    </div>
</div>

<!-- External JS -->
<script src="app.js"></script>

</body>
</html>
